<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ポートフォリオ megumi Lab</title>
    
    <!-- SEOメタタグ -->
    <meta name="description" content="megumi Labのポートフォリオサイトです。Web制作、JavaScript、デザインなどのスキルを紹介しています。">
    <meta name="keywords" content="ポートフォリオ, Web制作, JavaScript, デザイン, megumi Lab">
    <meta name="author" content="megumi Lab">
    
    <!-- Open Graph メタタグ -->
    <meta property="og:title" content="ポートフォリオ megumi Lab">
    <meta property="og:description" content="megumi Labのポートフォリオサイトです。Web制作、JavaScript、デザインなどのスキルを紹介しています。">
    <meta property="og:image" content="https://meccin5678.github.io/portfolio/img/trip.jpg">
    <meta property="og:url" content="https://meccin5678.github.io/portfolio/index.html">
    <meta property="og:type" content="website">
    
    <!-- Twitterカード メタタグ -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="ポートフォリオ megumi Lab">
    <meta name="twitter:description" content="megumi Labのポートフォリオサイトです。Web制作、JavaScript、デザインなどのスキルを紹介しています。">
    <meta name="twitter:image" content="https://meccin5678.github.io/portfolio/img/trip.jpg">
    
    <!-- CSSファイルの読み込み -->
    <link rel="stylesheet" href="../reset.css">
    <link rel="stylesheet" href="../style.css">

    <!-- JavaScriptファイルの読み込み -->
    <script src="nav.js" defer></script>

    <!-- Googleタグマネージャー -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-8R8H0HG7H0"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-8R8H0HG7H0');
    </script>
</head>
<body>
<style>
.honyaku-container{
    display: flex;
    justify-content: space-between;
    gap: 10px;
    width:  70%;
    @media screen and (max-width: 800px){
        flex-direction: column;
        gap: 40px;
        width: 100%;
    }
}
.from,.to{
    width: 50%;
    @media screen and (max-width: 800px){
        width: 100%;
    }
}

textArea{
    width: 100%;
    height: 300px;
    border: none;
    outline: none;
    background: none;
    resize: none;
    border-radius: 4px;
    border: 1px solid #444444;
    padding:10px;
}
.honyaku-options{
    display: flex;
    justify-content: center;
    gap:20px;
}
.kikukopi{
    display: flex;
    gap:5px;
}

select{
    line-height: 32px;
    font-size: 16px;
    border: 1px solid #444;
    padding:0 4px;
    text-align: center;
    cursor: pointer;
    border-radius: 4px;
    background-color: #ececec;
}
select:hover{
    background-color: #ffffff;
}
.kikukopi p:hover{
    background-color: #ffffff;
}
.honyaku-btn:hover{
    background-color: #ffffff;
    border: 1px solid #444;
}

.kikukopi p{
    line-height: 32px;
    font-size: 16px;
    border: 1px solid #444;
    padding:0 4px;
    text-align: center;
    cursor: pointer;
    border-radius: 4px;
    background-color: #ececec;
}
.honyaku-btn{
    width: 200px;
    height: 38px;
    border: none;
    outline: none;
    background-color: #c2c2c2;
    
    color: #000000;
    font-size: 16px;
    line-height: 38px;
    border-radius: 4px;
    cursor: pointer;
    text-align: center;
    margin: auto;
}
.center1000{
    width: 70%;
    margin-top: 40px;
    @media screen and (max-width: 800px){
        width: 100%;
    }
}
</style>
<header>
    <p class="top"><a href="calendar.html">JavaScriptサンプル集</a></p>
    <div class="hmb" id="hmb">
        <span></span>
        <span></span>
        <span></span>
    </div> 
</header>

<aside>
<!-- nav.htmlの内容が表示される -->
</aside>
<main>
<section>
    <h2>翻訳アプリ</h2>
    <p>fetchを使ってAPIを取りに行き、JavaScriptの機能で、スピーカーとコピーを働かせています</p><br>

    <div class ="honyaku-container">
        <div class="from">
            <textarea class="fromText" placeholder="入力してください"></textarea>
            <div class="honyaku-options">
                <select class="fromLang">
                    <option value="ja-JP">日本語</option>
                    <option value="en-US">英語</option>
                </select>
                <div class="kikukopi">
                    <p id="fromAudio">聴く</p>
                    <p id="fromCopy">コピー</p>
                </div>
            </div>
        </div>
        <div class="to">
            <textarea disabled class="toText" placeholder="翻訳結果が表示されます"></textarea>
            <div class="honyaku-options">
                <select class="toLang">
                    <option value="en-US">英語</option>
                    <option value="ja-JP">日本語</option>   
                </select>
                <div class="kikukopi">
                    <p id="toAudio">聴く</p>
                    <p id="toCopy">コピー</p>
                </div>
            </div>
        </div>
    </div>
    <div class="center1000">
    <div class="honyaku-btn">翻訳する</div>
    </div>
</section>
</main>
<footer>
    <p>&copy; 2023 megumi Lab. All rights reserved.</p>
</footer>   
    
<script>

const fromText = document.querySelector('.fromText');
const toText = document.querySelector('.toText');
const fromLang = document.querySelector('.fromLang');
const toLang = document.querySelector('.toLang');
const honyakuBtn = document.querySelector('.honyaku-btn');


let fromVal = 'ja-JP';
let toVal = 'en-US';

fromLang.addEventListener('change', ()=>{
    fromVal = fromLang.value;
});

toLang.addEventListener('change', ()=> {
    toVal = toLang.value;
});


honyakuBtn.addEventListener('click', ()=> {

  let sentence = fromText.value;

 fetch
 (`https://api.mymemory.translated.net/get?q=${sentence}&langpair=${fromVal}|${toVal}`)
 .then((res) => res.json())
 .then((data) => {
    return (toText.value=data.responseData.translatedText);
 });

});




const kikukopis = document.querySelectorAll('.kikukopi');
kikukopis.forEach((kikukopi) => {
    kikukopi.addEventListener('click',(data)=>{
        let voice;
        if(data.target.id==='fromAudio'){
            voice = new SpeechSynthesisUtterance(fromText.value);
        }
        if(data.target.id==='fromCopy'){
            navigator.clipboard.writeText(fromText.value); 
        }
        if(data.target.id==='toAudio'){
            voice = new SpeechSynthesisUtterance(toText.value);  
        }
        if(data.target.id==='toCopy'){
            navigator.clipboard.writeText(toText.value);    
        }
       speechSynthesis.speak(voice);
    });
});


</script> 
</body>
</html>